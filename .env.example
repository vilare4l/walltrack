# =============================================================================
# WallTrack - Autonomous Solana Memecoin Trading System
# =============================================================================
# Copy this file to .env and configure your values
# NEVER commit .env to git (contains secrets)

# =============================================================================
# Application Settings
# =============================================================================

# Environment: development | staging | production
ENV=development
DEBUG=true
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# =============================================================================
# Neo4j Graph Database (Wallet Clusters & Relationships)
# =============================================================================
# Used for: Cluster detection, funding relationships, co-occurrence analysis
# Container in localai stack: localai-neo4j-1

NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4jpass

# Dedicated database for WallTrack (isolates data from other projects)
# Neo4j Enterprise or Community 4.0+ supports multiple databases
# The database will be created automatically if it doesn't exist
NEO4J_DATABASE=walltrack

# Docker internal (when running in container):
# NEO4J_URI=bolt://localai-neo4j-1:7687

# =============================================================================
# Supabase PostgreSQL (Transactional Data)
# =============================================================================
# Used for: Wallets, signals, trades, positions, configurations
# Container in localai stack: localai-postgres-1

# Local Supabase (Docker) - Use port 6543 (transaction pooler)
# Port 5432 = session pooler (requires tenant format)
# Port 6543 = transaction pooler (simpler, recommended)
SUPABASE_URL=http://localhost:54321
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Dedicated PostgreSQL schema for WallTrack (isolates tables from other projects)
# All tables will be created in this schema: walltrack.wallets, walltrack.signals, etc.
# The schema will be created automatically if it doesn't exist
POSTGRES_SCHEMA=walltrack

# Alternative: Direct PostgreSQL connection (for migrations)
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# Connection Pool
DATABASE_POOL_MIN_SIZE=5
DATABASE_POOL_MAX_SIZE=20
DATABASE_TIMEOUT_SECONDS=60

# =============================================================================
# Helius API (Solana Webhooks & RPC)
# =============================================================================
# Used for: Real-time swap notifications, wallet monitoring
# Get your key at: https://dev.helius.xyz/

HELIUS_API_KEY=your_helius_api_key_here
HELIUS_WEBHOOK_SECRET=your_webhook_secret_here
HELIUS_RPC_URL=https://mainnet.helius-rpc.com/?api-key=your_helius_api_key_here

# Webhook endpoint (your server URL that Helius will call)
HELIUS_WEBHOOK_URL=https://your-server.com/webhooks/helius

# Webhook ID (set after first registration via API or auto-created)
HELIUS_WEBHOOK_ID=

# Auto-sync webhook after discovery (default: true)
HELIUS_AUTO_SYNC_WEBHOOK=true

# =============================================================================
# Jupiter API (DEX Aggregator for Swaps)
# =============================================================================
# Used for: Trade execution, quotes, route optimization
# Docs: https://station.jup.ag/docs/apis/swap-api

JUPITER_API_URL=https://quote-api.jup.ag/v6
JUPITER_SWAP_API_URL=https://quote-api.jup.ag/v6/swap

# Slippage settings (in basis points, 100 = 1%)
JUPITER_DEFAULT_SLIPPAGE_BPS=100
JUPITER_MAX_SLIPPAGE_BPS=500

# =============================================================================
# DexScreener API (Token Data)
# =============================================================================
# Used for: Token characteristics, price, liquidity, market cap
# Free tier: 300 requests/minute

DEXSCREENER_API_URL=https://api.dexscreener.com/latest

# =============================================================================
# Birdeye API (Fallback Token Data)
# =============================================================================
# Used as fallback when DexScreener is unavailable
# Get your key at: https://birdeye.so/

BIRDEYE_API_KEY=your_birdeye_api_key_here
BIRDEYE_API_URL=https://public-api.birdeye.so

# =============================================================================
# Solana Configuration
# =============================================================================
# RPC endpoints for blockchain queries

# Primary RPC (Helius recommended for reliability)
SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=your_helius_api_key_here

# Fallback RPC endpoints (comma-separated)
SOLANA_FALLBACK_RPCS=https://api.mainnet-beta.solana.com,https://solana-api.projectserum.com

# =============================================================================
# Trading Wallet (CRITICAL - KEEP SECRET)
# =============================================================================
# Your trading wallet private key (base58 encoded)
# NEVER share this or commit to git

TRADING_WALLET_PRIVATE_KEY=your_base58_private_key_here

# =============================================================================
# Trading Configuration
# =============================================================================

# Position Limits
MAX_CONCURRENT_POSITIONS=5
BASE_POSITION_SIZE_SOL=0.1
MAX_POSITION_SIZE_SOL=0.5

# Scoring Thresholds
SCORE_THRESHOLD=0.70
HIGH_CONVICTION_THRESHOLD=0.85

# Position Sizing Multipliers
HIGH_CONVICTION_MULTIPLIER=1.5
STANDARD_MULTIPLIER=1.0

# =============================================================================
# Risk Management
# =============================================================================

# Circuit Breakers
MAX_DRAWDOWN_PERCENT=20
MIN_WIN_RATE_PERCENT=40
WIN_RATE_TRADE_WINDOW=50
MAX_CONSECUTIVE_LOSSES=3
CONSECUTIVE_LOSS_SIZE_REDUCTION=0.5

# Position Limits
MAX_DAILY_TRADES=20
MAX_POSITION_HOLD_HOURS=24

# =============================================================================
# Exit Strategy Defaults
# =============================================================================

# Default Stop Loss (percentage from entry)
DEFAULT_STOP_LOSS_PERCENT=50

# Default Take Profit Levels (multipliers)
DEFAULT_TP1_MULTIPLIER=2.0
DEFAULT_TP1_SELL_PERCENT=33
DEFAULT_TP2_MULTIPLIER=3.0
DEFAULT_TP2_SELL_PERCENT=33
DEFAULT_TP3_MULTIPLIER=5.0
DEFAULT_TP3_SELL_PERCENT=34

# Trailing Stop
TRAILING_STOP_ACTIVATION_MULTIPLIER=2.0
TRAILING_STOP_DISTANCE_PERCENT=30

# Moonbag
DEFAULT_MOONBAG_PERCENT=0

# =============================================================================
# Wallet Discovery
# =============================================================================

# Discovery Scheduler
DISCOVERY_SCHEDULER_ENABLED=true
DISCOVERY_SCHEDULE_HOURS=6

# Discovery schedule (cron format) - legacy, use DISCOVERY_SCHEDULE_HOURS instead
DISCOVERY_SCHEDULE=0 */6 * * *

# Minimum metrics for wallet tracking
MIN_WALLET_WIN_RATE=50
MIN_WALLET_TOTAL_TRADES=10
MIN_WALLET_PNL_SOL=1.0

# Decay detection
DECAY_ROLLING_WINDOW=20
DECAY_WIN_RATE_THRESHOLD=40

# =============================================================================
# Cluster Detection
# =============================================================================

# Funding relationship detection
FUNDING_MIN_AMOUNT_SOL=0.1

# Synchronized buying detection
SYNC_BUY_WINDOW_MINUTES=5

# Co-occurrence analysis
COOCCURRENCE_MIN_TOKENS=3
COOCCURRENCE_TIME_WINDOW_HOURS=24

# Cluster scoring
MIN_CLUSTER_SIZE=3
MIN_CLUSTER_STRENGTH=0.3

# =============================================================================
# Signal Processing
# =============================================================================

# Cluster amplification
AMPLIFICATION_WINDOW_SECONDS=600
MIN_ACTIVE_MEMBERS_FOR_AMPLIFICATION=2
BASE_AMPLIFICATION_FACTOR=1.2
MAX_AMPLIFICATION_FACTOR=1.8

# Token filtering
MIN_TOKEN_AGE_SECONDS=300
MAX_TOKEN_AGE_HOURS=24
MIN_LIQUIDITY_USD=10000
MAX_MARKET_CAP_USD=10000000

# =============================================================================
# Gradio Dashboard
# =============================================================================

UI_PORT=7860
UI_HOST=0.0.0.0
UI_SHARE=false

# =============================================================================
# Monitoring & Alerts (Optional)
# =============================================================================

# Discord webhook for alerts
DISCORD_WEBHOOK_URL=

# Telegram bot (optional)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# =============================================================================
# Redis (Optional - for job queue)
# =============================================================================
# Container in localai stack: localai-redis-1

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Docker internal:
# REDIS_HOST=localai-redis-1

# =============================================================================
# MinIO Storage (Optional - for backups)
# =============================================================================
# Container in localai stack: localai-minio-1

STORAGE_ENABLED=false
STORAGE_ENDPOINT=http://localhost:9010
STORAGE_USER=minio
STORAGE_PASSWORD=miniopass
STORAGE_BUCKET_NAME=walltrack

# Docker internal:
# STORAGE_ENDPOINT=http://localai-minio-1:9000
